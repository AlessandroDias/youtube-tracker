<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Teste Yt Tracking</title>
</head>
<style>
	body {
		width: 960px;
		margin: 100px auto 0;
	}

	.video-holder {
		display: block;
		text-align: center;
	}
</style>
<body>

	<div class="video-holder">
		<div id="player"></div>
	</div>

	<script src="yt-tracking.js"></script>
	<script>
		var player;

		(function() {
			_loadYouTubeIframeAPI();
		})();

		function _loadYouTubeIframeAPI() {
			var tag = document.createElement('script');
			tag.src = "https://www.youtube.com/iframe_api";
			var firstScriptTag = document.getElementsByTagName('script')[0];
			firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
		}

		window.onYouTubeIframeAPIReady = function() {
			_embedYoutubeVideo('player');
		};

		function _embedYoutubeVideo(playerId) {
			player = new YT.Player(playerId, {
				height: '455',
				width: '621',
				videoId: 'hFjwbKMlmF4',
				playerVars: {
					'autoplay': 0,
					rel: 0
				},
				events: {
					'onReady': onPlayerReady,
					'onStateChange': onStateChange
				}
			});
		}

		function onPlayerReady(event) {
			event.target.tracking = new YtTracking(event.target, track, [0, 50]);
		}

		function onStateChange(event) {
			event.target.tracking.onVideoStateChange(event.data);
		}

		function track(percentage) {
			console.log('ga send track: ' + percentage + '%');
		}

	</script>
</body>
</html>